{"ast":null,"code":"var _jsxFileName = \"/Users/geonil/Desktop/react-new-hooks/src/components/useOptimistic/index.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useState, useRef, useOptimistic } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst deliverMessage = async message => {\n  await new Promise(response => setTimeout(response, 1000));\n  return message;\n};\nconst UseOptimisticComponent = () => {\n  _s();\n  const [messages, setMessages] = useState([{\n    text: \"Hello!!\",\n    sending: false,\n    key: 1\n  }]);\n  const sendMessage = async formData => {\n    const sentMessage = await deliverMessage(formData.get(`message`));\n    setMessages(messages => [...messages, {\n      text: sentMessage\n    }]);\n  };\n  return /*#__PURE__*/_jsxDEV(ParentComponent, {\n    messages: messages,\n    sendMessage: sendMessage\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 9\n  }, this);\n};\n_s(UseOptimisticComponent, \"TjZlj8ktAmkIpmVw0eLU4RnOdJM=\");\n_c = UseOptimisticComponent;\nconst ParentComponent = ({\n  messages,\n  sendMessage\n}) => {\n  _s2();\n  const formRef = useRef(null);\n  const [optimisticState, addOptimistic] = useOptimistic(messages, (state, newMessage) => [...state, {\n    text: newMessage,\n    sending: true\n  }]);\n  const formAction = async formData => {\n    addOptimistic(formData.get(`message`));\n    formRef.current.reset();\n    await sendMessage(formData);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [optimisticState.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [message.text, !!message.sending && /*#__PURE__*/_jsxDEV(\"small\", {\n        children: \" (Sending...)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 43\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }, this)), /*#__PURE__*/_jsxDEV(\"form\", {\n      action: formAction,\n      ref: formRef,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Add Message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s2(ParentComponent, \"3XiNltiyMvKg5eqys3YalOKfyAE=\", false, function () {\n  return [useOptimistic];\n});\n_c2 = ParentComponent;\nexport default UseOptimisticComponent;\nvar _c, _c2;\n$RefreshReg$(_c, \"UseOptimisticComponent\");\n$RefreshReg$(_c2, \"ParentComponent\");","map":{"version":3,"names":["useState","useRef","useOptimistic","jsxDEV","_jsxDEV","Fragment","_Fragment","deliverMessage","message","Promise","response","setTimeout","UseOptimisticComponent","_s","messages","setMessages","text","sending","key","sendMessage","formData","sentMessage","get","ParentComponent","fileName","_jsxFileName","lineNumber","columnNumber","_c","_s2","formRef","optimisticState","addOptimistic","state","newMessage","formAction","current","reset","children","map","index","action","ref","type","name","_c2","$RefreshReg$"],"sources":["/Users/geonil/Desktop/react-new-hooks/src/components/useOptimistic/index.tsx"],"sourcesContent":["import { useState, useRef, useOptimistic } from 'react';\n\ntype Messages = {\n    text: string,\n    sending?: boolean,\n    key?: number\n}[]\n\nconst deliverMessage = async (message: string) => {\n    await new Promise((response) => setTimeout(response, 1000));\n    return message;\n}\n\nconst UseOptimisticComponent = () => {\n    const [messages, setMessages] = useState<Messages>([\n        { text: \"Hello!!\", sending: false, key: 1 }\n    ]);\n\n\n    const sendMessage = async (formData: FormData) => {\n        const sentMessage = await deliverMessage(formData.get(`message`) as string);\n\n        setMessages((messages) => [...messages, { text: sentMessage }]);\n    };\n\n    return (\n        <ParentComponent messages={messages} sendMessage={sendMessage} />\n    );\n};\n\nconst ParentComponent = ({ messages, sendMessage } : { messages: Messages, sendMessage: (formData: FormData) => Promise<void> }) => {\n    const formRef = useRef(null);\n    const [optimisticState, addOptimistic] = useOptimistic(\n        messages, \n        (state, newMessage) => [...state, { text: newMessage, sending: true }]\n    );\n\n    const formAction = async (formData: FormData) => {\n        addOptimistic(formData.get(`message`));\n        formRef.current.reset();\n        \n        await sendMessage(formData);\n    }\n\n    return (\n        <>\n            {optimisticState.map((message, index) => (\n                <div key={index}>\n                    {message.text}\n                    {!!message.sending && <small> (Sending...)</small>}\n                </div>\n            ))}\n            <form action={formAction} ref={formRef}>\n                <input type=\"text\" name=\"message\" />\n                <button type=\"submit\">Add Message</button>\n            </form>\n        </>\n    )\n}\n\nexport default UseOptimisticComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}